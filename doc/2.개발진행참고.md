아래는 **AION2 HUB v0.1** 기준으로, 요청하신 2가지를 한 번에 드립니다.

1. **와이어프레임(페이지별 UI 구성) + 컴포넌트 목록(재사용 단위까지)**
2. **첫 이슈 30개(우선순위/완료 정의/테스트 기준 포함)** + **Codex CLI에 바로 넣는 작업 프롬프트 세트**

> 전제(안전선): AION2 운영정책에서 “비인가 프로그램(클라 제약상 정상 이용자가 못 하는 행위 가능하게 하는 프로그램 등)” 사용/제작·배포/클라 수정·개작을 금지하고 있고, 공식 공지에도 비인가 프로그램 주의 안내가 있습니다.
> 그래서 HUB는 **클라이언트/패킷/자동입력/후킹** 계열은 전부 제외하고, **플래너·공지 diff·레기온 운영**만으로 설계합니다. ([NC][1])

---

# 1) 정보구조(IA) & 라우트 맵

공식 데이터 소스는 우선 **공지/업데이트 게시판**을 대상으로 하고(공식 목록 URL 존재), 나머지는 **유저 입력/레기온 운영 데이터**로 구성합니다. ([Aion 2][2])

## 1.1 라우트 트리(초안)

```txt
/                         (Dashboard)
/login                   (Discord OAuth)
/settings
  /settings/modules       (모듈 On/Off, 권한)
  /settings/backup        (내보내기/가져오기)
  /settings/notifications (WebPush, Discord 알림 설정)
  /settings/safety        (Non-goal/금지 영역 고지)

/characters              (캐릭터 관리 - 수동 입력)

/m/planner/today
/m/planner/week
/m/planner/templates
/m/planner/stats

/m/notices/feed          (공지/업데이트 통합 피드)
/m/notices/:id
/m/notices/:id/diff
/m/notices/subscriptions

/m/legion/overview
/m/legion/events
/m/legion/events/new
/m/legion/events/:id
/m/legion/members
/m/legion/settings

/m/links/official         (공식 링크 허브)
```

---

# 2) 와이어프레임(텍스트 와이어프레임 + 인터랙션)

> 실제 Figma 그림 대신, **개발 바로 가능한 수준**으로 “영역/컴포넌트/동작”을 텍스트 와이어프레임으로 정의합니다.

## 2.1 공통 App Shell(모든 페이지 공통)

```
┌───────────────────────────────────────────────────────────────┐
│ TopBar: [☰]  AION2 HUB   [Search…]  [Char ▼] [Legion ▼] [User] │
├───────────────┬───────────────────────────────────────────────┤
│ Sidebar       │ Main                                           │
│ - Dashboard   │  (페이지별 컨텐츠)                              │
│ - Planner     │                                                │
│ - Notices     │                                                │
│ - Legion      │                                                │
│ - Links       │                                                │
│               │                                                │
│ (Bottom)      │                                                │
│ - Settings    │                                                │
└───────────────┴───────────────────────────────────────────────┘
```

**TopBar 규칙**

* `Char ▼`: Planner에서 “본캐/부캐” 빠른 전환
* `Legion ▼`: Legion 모듈에서 길드 선택
* `Search`: 공지 제목/이벤트/템플릿 검색(모듈별 스코프 선택 가능)
* `User`: Discord 로그인 상태 + 권한(레기온 admin)

---

## 2.2 Dashboard `/`

```
[PageTitle: Dashboard]

Row1 (3 cards)
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│ 오늘 숙제     │ │ 공지 변경     │ │ 다음 이벤트   │
│ 7/12 완료     │ │ 2건 변경됨    │ │ 20:00 원정    │
│ [바로가기]    │ │ [Diff 보기]   │ │ [참가현황]    │
└──────────────┘ └──────────────┘ └──────────────┘

Row2
┌───────────────────────────────┐  ┌───────────────────────────┐
│ Quick Actions                 │  │ Recent Changes            │
│ - 캐릭터 추가                 │  │ - [업데이트] 변경됨 1건   │
│ - 이벤트 생성                 │  │ - [공지] 변경됨 1건       │
│ - 백업 내보내기               │  │ [전체 보기]               │
└───────────────────────────────┘  └───────────────────────────┘

Row3
┌───────────────────────────────────────────────────────────────┐
│ “이번 주 목표” (선택) - 사용자 입력 기반(주간/월간)             │
└───────────────────────────────────────────────────────────────┘
```

**인터랙션**

* 카드 클릭 시 해당 모듈 페이지로 이동
* “공지 변경”은 공식 게시판(공지/업데이트) 스냅샷 비교 결과를 표시 ([Aion 2][2])

---

## 2.3 Planner: 오늘 `/m/planner/today`

```
[PageTitle: Planner - 오늘]
[Char Tabs: 본캐 | 부캐1 | 부캐2 | +]

(좌측/상단) Filters: [전체] [일일] [주간] [충전형] [필수만]
(우측) Time Budget: ( 15 | 30 | 60 | 90 ) 분  [추천 보기]

┌───────────────────────────────┬───────────────────────────────┐
│ Task List (그룹별)            │ 추천 루틴 / 세션 타이머         │
│ - 일일                        │ - 추천 30분 루틴               │
│   [ ] 악몽 (10m)              │   1) 봉인 8m                   │
│   [ ] 봉인 (8m)               │   2) 악몽 10m                  │
│ - 충전형 (스택/쿨다운 뱃지)   │   3) 일일 던전 12m              │
│   [ ] 주둔지 (1/2)            │ [세션 시작] [편집]             │
│ - 메모/기타                   │ 세션 타이머: 00:00             │
└───────────────────────────────┴───────────────────────────────┘
```

**핵심 인터랙션**

* 체크 시 “완료 기록 + 소요시간(선택)” 저장
* 충전형은 `현재 스택/최대 스택/다음 충전까지 남은 시간` 뱃지 표시
* “추천 보기”는 최근 소요시간 평균 기반(없으면 템플릿 기본값)으로 **예산 내 최적(근사)** 선택

---

## 2.4 Planner: 이번주 `/m/planner/week`

```
[PageTitle: Planner - 이번주]
[Week Reset D-??] (사용자 설정 시간 기반)

┌───────────────────────────────────────────────────────────────┐
│ 주간 체크(캐릭터별 탭/필터)                                    │
│ - 주간(5/9)                                                     │
│   [ ] 원정 1회 (30m)                                            │
│   [ ] 초월 2회 (45m)                                            │
│ - 누적/기록(선택)                                               │
└───────────────────────────────────────────────────────────────┘

(하단) 간단 통계: 완료율, 평균 소요시간, 이번주 총 플레이 기록
```

---

## 2.5 Planner: 템플릿 `/m/planner/templates`

```
[PageTitle: Planner - 템플릿]
[+ 템플릿 생성]

┌───────────────────────────────┬───────────────────────────────┐
│ 템플릿 리스트                  │ 템플릿 편집 패널(드로어)        │
│ - 악몽 (일일, 10m, 필수)       │ 이름: ________                 │
│ - 봉인 (일일, 8m)             │ 타입: 일일/주간/충전형          │
│ - 주둔지 (충전형, 12m)         │ 기본 소요시간: __분            │
│                               │ 우선순위: 필수/선호/옵션        │
│                               │ 태그: [PvE] [Solo]             │
│                               │ (충전형) 쿨다운/최대스택        │
│                               │ [저장] [삭제]                  │
└───────────────────────────────┴───────────────────────────────┘
```

---

## 2.6 Notices: 피드 `/m/notices/feed`

공식에 **공지 목록**과 **업데이트 목록**이 분리되어 있으니, UI에서는 “두 소스 통합 + 필터”로 제공합니다. ([Aion 2][2])

```
[PageTitle: Notices]
Filters: [전체] [공지] [업데이트]   Sort: [최신] [변경됨]
Search: [ 제목/키워드… ]  [구독 설정]

List
┌───────────────────────────────────────────────────────────────┐
│ [변경됨] (업데이트) 1/28(수) 업데이트 노트  - diff 있음         │
│ published: 2026-01-xx  lastSeen: 2026-01-xx  [Diff] [상세]      │
├───────────────────────────────────────────────────────────────┤
│ [신규] (공지) 비인가 프로그램 사용 주의 안내  [상세]            │
└───────────────────────────────────────────────────────────────┘
```

---

## 2.7 Notices: 상세 `/m/notices/:id` + Diff `/m/notices/:id/diff`

```
[Title: (공지/업데이트 제목)]
Meta: source, publishedAt, lastFetchedAt, 원문 링크

Tabs: [요약] [Diff(최신)] [히스토리]

요약 탭:
- 핵심 bullet 3~7개(LLM 요약 가능)
- “내 키워드 매칭” 뱃지 (예: 어비스/원정/클래스)

Diff 탭:
┌───────────────────────────────────────────────────────────────┐
│ 변경 블록 뷰어                                                  │
│  - Added blocks                                                 │
│  - Removed blocks                                               │
│  - Unchanged(접기)                                              │
│ [복사] [공유 링크]                                              │
└───────────────────────────────────────────────────────────────┘

히스토리 탭:
- Snapshot 목록(fetchedAt, hash)
- 스냅샷 선택 → diff 생성/조회
```

---

## 2.8 Notices: 구독 `/m/notices/subscriptions`

```
[PageTitle: 구독/알림]
- 키워드 구독 추가: [어비스] [원정] [치유성] ...
- 소스 선택: [공지] [업데이트]
- 전달: [Web Push] [Discord DM/채널](옵션)
- 빈도: 즉시 / 하루 1회 요약
- [저장]

구독 목록:
- "어비스, 균열" (공지+업데이트, 즉시) [편집] [삭제]
```

> 참고로 공식 업데이트 노트에는 “스킬 매크로” 같은 단어가 등장합니다. 이는 게임 내 기능 설명이므로, HUB 쪽에서는 오해 방지를 위해 “매크로” 대신 **‘템플릿/루틴/단축키 메모’** 표현을 사용하고 자동 입력은 제공하지 않습니다. ([Aion 2][3])

---

## 2.9 Legion: 오버뷰 `/m/legion/overview`

```
[PageTitle: Legion]
[Legion Switcher ▼] [Discord 연결 상태 뱃지]

Row1
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│ 다가오는 이벤트│ │ 오늘 참가현황 │ │ 이번달 노쇼율 │
└──────────────┘ └──────────────┘ └──────────────┘

Row2
┌───────────────────────────────────────────────────────────────┐
│ Upcoming Events (리스트)                                        │
│ - 20:00 원정 / 역할 슬롯: 탱1 힐2 딜5 / 신청 7/8                │
│   [상세] [디스코드 공지]                                         │
└───────────────────────────────────────────────────────────────┘
```

---

## 2.10 Legion: 이벤트 목록 `/m/legion/events` + 생성 `/m/legion/events/new`

```
[Events]
View: [리스트] [캘린더]   Filter: [원정] [어비스] [기타]
[+ 이벤트 생성]

Event Card
- 제목 / 시작 시간 / 종류
- 역할 슬롯(탱/힐/딜) 진행바
- [상세] [공지] [리마인드 설정]
```

생성 페이지:

* 제목/종류/시간/채널(디스코드)/역할별 슬롯 수/메모
* 저장 시: DB 저장 + (선택) 디스코드 공지 메시지 생성

---

## 2.11 Legion: 이벤트 상세 `/m/legion/events/:id`

```
[Event Detail]
- 기본 정보(시간/메모)
- 역할 슬롯 편집(ADMIN)
- 신청자 테이블(역할/상태/메모)
- 출석 체크(PRESENT/LATE/NOSHOW)
- [디스코드에 상태 업데이트]
```

---

## 2.12 Settings: 모듈/백업/알림/안전선

* **Modules**: planner/notices/legion/links 토글 + 권한 표시
* **Backup**: Planner 로컬 데이터 JSON 내보내기/가져오기
* **Notifications**: WebPush 키워드 구독, 디스코드 채널/DM 설정
* **Safety**: “금지 기능(클라/패킷/자동입력)” 고지 + 사용자 동의 체크

---

# 3) 컴포넌트 목록(재사용 단위까지)

## 3.1 Core UI (packages/ui 또는 apps/web 공통)

* `AppShell`

  * props: `sidebarItems`, `topbarSlots`
* `SidebarNav`

  * 모듈 nav 자동 렌더
* `TopBar`

  * `SearchBox`, `CharacterSwitcher`, `LegionSwitcher`, `UserMenu`
* `PageHeader`

  * title, description, actions
* `Card`, `StatCard`, `EmptyState`, `Skeleton`
* `Tabs`, `SegmentedControl`, `Chip`, `Badge`, `ProgressBar`
* `Modal`, `Drawer`, `ConfirmDialog`
* `Toast` / `InlineAlert`
* `DataTable`(Legion 신청자/멤버 목록)
* `DateTimePicker`(이벤트 생성)

## 3.2 모듈 프레임(Core 계약)

* `ModuleRegistryProvider`
* `ModulePageRenderer`

  * 라우트 `/m/[moduleId]/[pageId]` → manifest load로 컴포넌트 lazy import
* `DashboardWidgetGrid`

  * `module.widgets[]` 렌더

## 3.3 Planner 컴포넌트

* `PlannerTodayPage`
* `PlannerWeekPage`
* `TaskGroup`

  * props: `groupTitle`, `tasks[]`
* `TaskItem`

  * checkbox, estimated minutes, notes, cooldown badge
* `TimeBudgetSelector`

  * 15/30/60/90
* `RoutineRecommendationPanel`

  * 추천 리스트 + 세션 시작/종료
* `ResetCountdown`

  * 일일/주간 리셋까지 남은 시간
* `TemplateEditorDrawer`
* `LocalBackupPanel`(JSON export/import)

## 3.4 Notices 컴포넌트

* `NoticesFeedPage`
* `NoticeListItem`

  * status(new/changed), source(notice/update)
* `NoticeDetailPage`
* `DiffViewer`

  * block diff 렌더(added/removed/same 접기)
* `SnapshotHistoryList`
* `SubscriptionForm`

  * keywords chips + delivery(webpush/discord) + source filter

## 3.5 Legion 컴포넌트

* `LegionOverviewPage`
* `EventsListPage`
* `EventCreateForm`
* `EventDetailPage`
* `RoleSlotsEditor`
* `SignupTable`
* `AttendanceToggleGroup`
* `DiscordConnectionBanner`

  * 길드 연결/채널 설정 상태 표시

## 3.6 공통 데이터 레이어

* `apiClient` (fetch wrapper)
* `useQuery`/`useMutation`(SWR 또는 TanStack Query 중 택1)
* `zodSchemas`(API request/response 검증)
* `rateLimitAwareFetcher`(공지 조회 과도 요청 방지)

---

# 4) 첫 이슈 30개 (우선순위/완료정의/테스트 기준)

표기 규칙

* Priority: **P0(필수)** / P1(중요) / P2(후순위)
* Size: S/M/L
* DoD: 코드 + 테스트 + 문서/스크립트 + CI 통과 기준

---

## 4.1 Foundation / Infra (1~8)

1. **[P0/M] pnpm+turbo 모노레포 스캐폴딩**

* AC: `apps/web, api, worker, bot-discord`, `packages/core, db, modules/*` 생성, `pnpm -r build` 성공
* Tests: 없음(빌드 확인)
* DoD: README에 로컬 실행 방법 포함

2. **[P0/S] docker-compose(Postgres+Redis)**

* AC: `docker compose up` 후 healthcheck 통과, env 예시 제공
* Tests: compose 실행 확인
* DoD: `.env.example` 작성

3. **[P0/S] Prisma 초기 셋업 + migrate skeleton**

* AC: Prisma schema 작성, `migrate dev` 성공, `prisma generate` 적용
* Tests: DB 연결 smoke test
* DoD: 마이그레이션 파일 커밋

4. **[P0/S] Fastify API skeleton + 헬스체크**

* AC: `/health` 200, CORS/JSON 파서 설정
* Tests: supertest로 /health
* DoD: lint/typecheck 통과

5. **[P0/S] Worker(BullMQ) skeleton + Job 실행**

* AC: queue에 더미 job 넣으면 worker가 처리/로그 남김
* Tests: integration(로컬 redis로 job 처리)
* DoD: 재시도/백오프 설정 포함

6. **[P0/M] Discord bot skeleton + 커맨드 등록**

* AC: `/ping` 커맨드 응답, 환경변수로 token/guild 설정
* Tests: 최소 e2e(수동 체크) + mock handler 단위테스트(선택)
* DoD: 봇 실행/종료 스크립트 정리

7. **[P0/S] Codex Team Config(.codex/) + 안전 스킬 적용**

* AC: `.codex/config.toml` + skills 생성, SAFE_BOUNDARIES 문서 포함
* Tests: 없음
* DoD: 금지 기능 체크리스트가 repo에 존재

8. **[P1/S] CI 파이프라인(빌드/타입/린트/테스트)**

* AC: PR에서 `pnpm -r lint && pnpm -r test && pnpm -r build` 수행
* Tests: CI 자체
* DoD: 배지/문서화

---

## 4.2 Core Web Shell + 모듈 시스템 (9~14)

9. **[P0/M] Next.js web AppShell + 라우팅 뼈대**

* AC: Sidebar/Topbar/Content 레이아웃, Settings/Characters 기본 페이지
* Tests: playwright(옵션) or smoke render
* DoD: 모바일 뷰에서 깨짐 없음

10. **[P0/M] Module registry + /m/[moduleId]/[pageId] 렌더러**

* AC: manifest 등록된 페이지가 lazy import로 렌더됨
* Tests: module 하나 등록 후 라우트 테스트
* DoD: 404 처리/권한 처리 포함

11. **[P0/S] Dashboard 위젯 그리드**

* AC: 모듈 widget 3개가 홈에 렌더
* Tests: snapshot 테스트(선택)
* DoD: EmptyState 처리

12. **[P1/M] Settings: Modules 토글 + Backup/Notifications/Safety 페이지**

* AC: 모듈 토글 UI(기능은 feature flag), 백업 버튼(Planner 훅 연결은 이후)
* Tests: UI 단위
* DoD: Safety 페이지에 금지 영역 명시

13. **[P1/S] Characters 페이지(수동 입력 CRUD - 로컬/서버 중 MVP는 로컬)**

* AC: 캐릭터 추가/수정/삭제, Planner char switcher 연동
* Tests: store 단위테스트
* DoD: 입력 검증/중복 방지

14. **[P2/M] PWA 기본(Manifest + install 안내 + offline banner)**

* AC: 설치 가능, offline에서도 Planner 진입(데이터는 indexedDB)
* Tests: lighthouse(선택)
* DoD: 캐시 전략 문서화

---

## 4.3 Planner 모듈 (15~20)

15. **[P0/M] Planner 데이터모델 + IndexedDB(Dexie) 저장**

* AC: characters/templates/completions 저장/로드
* Tests: 리셋 계산 단위테스트
* DoD: export/import 가능한 구조 확보

16. **[P0/M] Today 페이지(그룹/필터/체크)**

* AC: 일일/주간/충전형 그룹 표시, 체크하면 완료 기록 생성
* Tests: UI + store 테스트
* DoD: 접근성(라벨/키보드) 확인

17. **[P0/M] Week 페이지 + 리셋 카운트다운**

* AC: 주간 항목 완료/미완 표시, 리셋 시간 사용자 설정 연동
* Tests: 리셋 로직 테스트
* DoD: 타임존(Asia/Seoul) 기준

18. **[P1/M] Templates 페이지 + 편집 드로어**

* AC: 템플릿 CRUD, 충전형 파라미터 지원
* Tests: template validation 테스트
* DoD: 마이그레이션(로컬 스키마 버전) 설계

19. **[P1/M] 타임버짓 추천(30/60분) + 세션 타이머**

* AC: 예산 내 추천 리스트 생성(그리디 근사), 세션 시작/종료 기록
* Tests: 추천 알고리즘 단위테스트(결정적 입력)
* DoD: 추천 이유(정렬 기준) UI 표시

20. **[P2/M] Planner 통계(최근 7/30일 완료율/평균 소요)**

* AC: 통계 카드 3개 + 리스트
* Tests: 계산 로직 테스트
* DoD: 개인정보는 로컬에만(기본)

---

## 4.4 Notices 모듈 + 수집 파이프라인 (21~25)

공식에 **공지 목록**/ **업데이트 목록**이 있으므로, Worker는 두 소스를 주기적으로 가져와 스냅샷/디프를 생성합니다. ([Aion 2][2])

21. **[P0/M] NoticeSource 파서(목록) + NoticeItem upsert**

* AC: list 페이지에서 title/url/externalId 추출, DB upsert
* Tests: fixture HTML로 파싱 테스트
* DoD: 레이트리밋/캐시 옵션 포함

22. **[P0/M] NoticeDetail fetch + Snapshot 저장(텍스트 정규화+hash)**

* AC: 본문 fetch → normalize → sha256 hash → 스냅샷 저장
* Tests: normalize 함수 단위테스트
* DoD: 변화 없으면 스냅샷 추가 안 함

23. **[P0/M] Diff 생성(블록 diff) + NoticeDiff 저장**

* AC: 스냅샷 변경 시 diffJson 생성, UI에서 렌더 가능
* Tests: 고정 텍스트 diff 테스트
* DoD: diff 크기 제한/압축(선택)

24. **[P1/M] API: /notices, /notices/:id, /notices/:id/diff**

* AC: 페이지네이션/필터(공지/업데이트), 최신 diff 반환
* Tests: supertest API 테스트
* DoD: rate limit(특히 /feed) 적용

25. **[P1/M] Web: Notices Feed/Detail/Diff/Subscriptions 화면**

* AC: 변경됨/신규 뱃지, diff 뷰어(added/removed/same), 키워드 구독 CRUD
* Tests: UI smoke + API 통합
* DoD: 원문 링크 제공(공식)

---

## 4.5 Legion + Discord Bot (26~29)

26. **[P0/M] DB: Legion/Event/Signup/Attendance 모델 확정 + migrate**

* AC: 이벤트 생성/신청/출석 저장 가능
* Tests: prisma client CRUD 테스트
* DoD: unique/index 적용(중복 신청 방지)

27. **[P0/M] API: 레기온/이벤트 CRUD + 신청/출석 엔드포인트**

* AC: 이벤트 생성, 역할 슬롯, 신청 upsert, 출석 업데이트
* Tests: API 통합 테스트
* DoD: 권한(ADMIN) 체크

28. **[P0/M] Discord Bot: 이벤트 공지 메시지 + 버튼 신청 처리**

* AC: 버튼 클릭 → API 호출 → 신청 반영/대기열 처리
* Tests: handler 단위테스트(모킹)
* DoD: 재시도/오류 메시지 UX

29. **[P1/M] Web: Legion UI(overview/events/new/detail/members/settings)**

* AC: 이벤트 생성 폼/신청 현황/출석 토글/디스코드 연결 상태 표시
* Tests: 주요 페이지 렌더 smoke
* DoD: 운영자 흐름 문서화

---

## 4.6 Release / Docs (30)

30. **[P1/M] 운영 문서 + 안전 고지 + 배포 스크립트**

* AC: 로컬 실행(4 apps) 가이드, env 설명, “금지 기능” 고지 페이지 연동
* Tests: 문서대로 실행하면 재현 가능
* DoD: 릴리스 노트 템플릿 포함

---

# 5) Codex CLI 작업 프롬프트 세트(바로 복붙용)

Codex CLI는 보안/승인 정책을 CLI 플래그로 제어할 수 있고, `--full-auto`는 “낮은 마찰” 모드로 `--ask-for-approval on-request` + `--sandbox workspace-write`를 세팅하는 단축 옵션이 문서에 명시되어 있습니다. ([OpenAI 개발자 포털][4])
또한 보안 문서에서 `--sandbox workspace-write --ask-for-approval untrusted/never` 같은 조합의 의미와 위험도가 정리되어 있고, 무조건 우회하는 `--dangerously-bypass-approvals-and-sandbox`는 위험하다고 안내합니다. ([OpenAI 개발자 포털][5])
설정 파일은 유저 레벨 `~/.codex/config.toml`, 프로젝트 레벨 `.codex/config.toml`로 스코프를 나눌 수 있습니다. ([OpenAI 개발자 포털][6])
팀 단위로 requirements를 걸어 강제하는 “Team Config/requirements.toml”도 문서화돼 있어, 안전 모드 고정이 가능합니다. ([OpenAI 개발자 포털][7])

## 5.1 추천 실행 방식(초기)

* 초반(설계/스캐폴딩/리스크 낮춤):

  * `--sandbox workspace-write --ask-for-approval on-request`
* 어느 정도 안정화 후(반복 작업 줄이기):

  * 일부 작업에서만 `--ask-for-approval untrusted` 고려
* **절대 금지(프로젝트 정책)**: `--dangerously-bypass-approvals-and-sandbox`

## 5.2 `.codex/config.toml`(프로젝트) 예시

```toml
approval_policy = "on-request"
sandbox_mode = "workspace-write"
```

(설정 파일 위치/스코프는 Codex Config basics에 설명됩니다.) ([OpenAI 개발자 포털][6])

---

## 5.3 프롬프트 묶음 A: (1~8) Foundation/Infra 한 방에

```bash
codex --sandbox workspace-write --ask-for-approval on-request
```

**프롬프트(그대로 붙여넣기):**

```text
AION2 HUB 모노레포를 pnpm workspace + turbo로 생성해줘.

구성:
- apps/web: Next.js(App Router) TypeScript
- apps/api: Fastify + Zod
- apps/worker: BullMQ worker(Queue/Processor 분리)
- apps/bot-discord: discord.js 봇 skeleton(/ping)
- packages/core: 모듈 인터페이스 + registry
- packages/db: Prisma(Postgres) + migrate + generate
- packages/modules/planner, notices, legion: manifest.ts만 우선 생성

infra:
- docker-compose.yml로 postgres+redis 올리기
- .env.example 작성

품질:
- eslint + prettier + typecheck 스크립트
- pnpm -r build가 통과하도록 최소 코드까지 작성

마지막에 로컬 실행 방법을 README에 정리해줘.
```

---

## 5.4 프롬프트 묶음 B: (9~14) Core Web Shell + 모듈 시스템

```text
apps/web에 AppShell(TopBar/Sidebar/Content)을 만들고,
packages/core의 HubModule/registry 기반으로 모듈을 등록해.

요구사항:
- / 에 Dashboard 페이지 (위젯 그리드)
- /settings/* 기본 페이지들(Modules/Backup/Notifications/Safety)
- /characters 수동 입력 CRUD(로컬 저장 우선)
- /m/[moduleId]/[pageId]에서 manifest.pages.load()로 lazy import 렌더
- 모듈이 제공하는 widgets를 Dashboard에 카드로 렌더

테스트:
- module registry에서 특정 모듈/페이지가 라우팅되는지 최소 단위테스트 1개
```

---

## 5.5 프롬프트 묶음 C: (15~20) Planner 모듈

```text
planner 모듈을 구현해줘(로컬-퍼스트).
- IndexedDB(Dexie)로 저장: characters/templates/completions/durations
- /m/planner/today: 그룹(일일/주간/충전형) + 필터 + 체크
- /m/planner/week: 주간 목록 + 리셋 카운트다운(설정 값)
- /m/planner/templates: 템플릿 CRUD + 충전형(쿨다운/최대스택)
- 타임버짓 추천(30/60분): 최근 평균 소요시간 기반 그리디 근사
- 세션 타이머(시작/종료) + duration 기록

테스트:
- 리셋 계산 함수와 추천 로직에 대한 단위테스트(결정적 입력) 추가
```

---

## 5.6 프롬프트 묶음 D: (21~25) Notices 수집/DIFF/구독

공지/업데이트 목록은 공식에 존재하므로(목록 페이지), 이를 대상으로 스냅샷/diff 파이프라인을 구축합니다. ([Aion 2][2])

```text
notices 모듈과 공지/업데이트 수집 파이프라인을 구현해줘.

Worker:
- 공식 공지 목록과 업데이트 목록을 주기적으로 fetch
- NoticeItem upsert(source, externalId, title, url, publishedAt)
- 각 NoticeItem에 대해 detail fetch → normalize text → sha256 hash
- hash가 변하면 NoticeSnapshot 저장하고 NoticeDiff(diffJson 블록형) 생성
- 레이트리밋/캐시/재시도(백오프) 포함

API:
- GET /api/v1/notices?source=notice|update&page&pageSize
- GET /api/v1/notices/:id
- GET /api/v1/notices/:id/diff (latest)
- 구독: keywords + sources + delivery(webpush/discord) CRUD(우선 webpush는 stub 가능)

Web:
- /m/notices/feed: 신규/변경됨 뱃지 + 필터 + 검색
- /m/notices/:id: 상세 + 탭(요약/DIFF/히스토리)
- /m/notices/:id/diff: DiffViewer(added/removed/same 접기)
- /m/notices/subscriptions: 키워드 구독 관리
```

---

## 5.7 프롬프트 묶음 E: (26~29) Legion + Discord Bot

```text
legion 모듈을 구현해줘.

DB/Prisma:
- Legion/LegionMember/Event/EventRole/EventSignup/Attendance 모델 확정 후 migrate

API:
- 레기온 생성/조회
- 이벤트 생성/조회
- 신청 upsert(역할, status confirmed/waitlist)
- 출석 업데이트

Discord Bot:
- /event create(또는 웹에서 생성된 이벤트 공지)
- 이벤트 공지 메시지 + 역할 버튼(탱/힐/딜)
- 버튼 클릭 시 API 호출하여 신청 반영
- 슬롯 초과면 waitlist 처리
- 오류/권한 부족 메시지 UX

Web:
- /m/legion/overview, /events, /events/new, /events/:id, /members, /settings
- 이벤트 상세에서 신청/출석을 관리할 수 있게
```

---

# 6) “공식 링크 허브” 기본 데이터(코드에만 넣기)

공식 게시판/랭킹/캐릭터 정보 페이지는 링크 허브로 제공하면 데이터 수집 없이도 UX가 좋아집니다. (공지/업데이트 목록은 실제 존재) ([Aion 2][2])

```ts
export const OFFICIAL_LINKS = [
  { id: "notice",  title: "공지",     url: "https://aion2.plaync.com/ko-kr/board/notice/list" },
  { id: "update",  title: "업데이트", url: "https://aion2.plaync.com/ko-kr/board/update/list" },
  { id: "ranking", title: "랭킹",     url: "https://aion2.plaync.com/ko-kr/ranking/index" },
  { id: "chars",   title: "캐릭터 정보실", url: "https://aion2.plaync.com/ko-kr/characters/index" },
];
```

---

## 다음 액션(제가 추천하는 진행 순서)

* **1일차:** 1~14(뼈대)까지 끝내서 “올인원 느낌” 먼저 만들기
* **2~3일차:** 15~20(Planner)로 유저 체감 만들기
* **4~5일차:** 21~25(공지 diff)로 “매일 들어올 이유” 만들기
* **6~7일차:** 26~29(레기온+봇)로 차별화 완성

원하시면, 위 30개 이슈를 그대로 **GitHub Issues 생성용 YAML/Markdown 템플릿** 형태로도 정리해서(라벨/마일스톤 포함) 바로 올릴 수 있게 만들어드릴게요.

[1]: https://www.plaync.com/policy/operation/aion2?utm_source=chatgpt.com "AION2 운영정책"
[2]: https://aion2.plaync.com/ko-kr/board/notice/list?utm_source=chatgpt.com "공지 : AION2-NCSOFT"
[3]: https://aion2.plaync.com/ko-kr/board/update/view?articleId=69791238ba0dc1026f956b24&utm_source=chatgpt.com "[안내] 1/28(수) 업데이트 노트 - aion2 - NCSOFT"
[4]: https://developers.openai.com/codex/cli/reference/?utm_source=chatgpt.com "Command line options"
[5]: https://developers.openai.com/codex/security/?utm_source=chatgpt.com "Security"
[6]: https://developers.openai.com/codex/config-basic/?utm_source=chatgpt.com "Config basics"
[7]: https://developers.openai.com/codex/team-config?utm_source=chatgpt.com "Team Config"
