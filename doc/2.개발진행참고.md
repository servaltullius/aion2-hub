아래 문서는 **AION2 HUB (Planner + Notices diff)** 기준의 개발 진행 참고(v0.2)입니다.

> 2026-01-28 결정: **Legion/Discord Bot은 스코프에서 제외**(레포에서도 제거).

---

# 1) 정보구조(IA) & 라우트 맵

```txt
/                         (Dashboard)
/settings
  /settings/modules       (모듈 On/Off)
  /settings/backup        (내보내기/가져오기)
  /settings/notifications (WebPush 알림 설정 - stub)
  /settings/safety        (Non-goal/금지 영역 고지)

/characters              (캐릭터 관리 - 수동 입력)

/m/planner/today
/m/planner/week
/m/planner/templates
/m/planner/stats

/m/notices/feed          (공지/업데이트 통합 피드)
/m/notices/:id
/m/notices/:id/diff
/m/notices/subscriptions

/m/links/official         (공식 링크 허브)
```

---

# 2) 공통 App Shell

```txt
TopBar: [☰] AION2 HUB  [Search…]  [Char ▼]
Sidebar:
- Dashboard
- Planner
- Notices
- Links
- Characters
- Settings
```

---

# 3) 현재 구현 상태

- Core Web Shell + Module System: 완료
- Planner MVP: 완료 (Dexie/IndexedDB)
- Notices(수집/스냅샷/DIFF/구독): 다음 단계

---

# 4) 다음 구현(추천): Notices (21~25)

## 4.1 Worker
- 공식 공지/업데이트 목록 주기 fetch
- NoticeItem upsert(source, externalId, title, url, publishedAt)
- 상세 fetch → normalize text → sha256 hash
- hash 변경 시 NoticeSnapshot 저장 + NoticeDiff 생성
- 레이트리밋/캐시/재시도(백오프)

## 4.2 API
- GET /api/v1/notices?source=notice|update&page&pageSize
- GET /api/v1/notices/:id
- GET /api/v1/notices/:id/diff (latest)
- 구독: keywords + sources + delivery(webpush) CRUD (우선 webpush는 stub 가능)

## 4.3 Web
- /m/notices/feed: 신규/변경됨 뱃지 + 필터 + 검색
- /m/notices/:id: 상세 + 탭(요약/DIFF/히스토리)
- /m/notices/:id/diff: DiffViewer(added/removed/same 접기)
- /m/notices/subscriptions: 키워드 구독 관리

---

# 5) Codex CLI 프롬프트(다음 턴용)

```text
notices 모듈과 공지/업데이트 수집 파이프라인을 구현해줘.

Worker:
- 공식 공지 목록과 업데이트 목록을 주기적으로 fetch
- NoticeItem upsert(source, externalId, title, url, publishedAt)
- 각 NoticeItem에 대해 detail fetch → normalize text → sha256 hash
- hash가 변하면 NoticeSnapshot 저장하고 NoticeDiff(diffJson 블록형) 생성
- 레이트리밋/캐시/재시도(백오프) 포함

API:
- GET /api/v1/notices?source=notice|update&page&pageSize
- GET /api/v1/notices/:id
- GET /api/v1/notices/:id/diff (latest)
- 구독: keywords + sources + delivery(webpush) CRUD(우선 webpush는 stub 가능)

Web:
- /m/notices/feed: 신규/변경됨 뱃지 + 필터 + 검색
- /m/notices/:id: 상세 + 탭(요약/DIFF/히스토리)
- /m/notices/:id/diff: DiffViewer(added/removed/same 접기)
- /m/notices/subscriptions: 키워드 구독 관리
```
